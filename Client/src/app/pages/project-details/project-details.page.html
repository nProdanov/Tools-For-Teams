<div id="wrapper">
    <div id="sidebar-wrapper">
        <ul class="sidebar-nav">
            <li class="sidebar-brand">
                <div class="dropdown">
                    <button class="btn btn-default dropdown-toggle" type="button" data-toggle="dropdown">Project members
  <span class="caret"></span></button>
                    <ul class="dropdown-menu" style="position: absolute; top:45px; left: 80px;">
                        <li *ngFor="let user of users">
                            <a routerLink="#">{{user}}</a>
                        </li>
                    </ul>
                </div>
            </li>
            <li class="sidebar-brand">
                <a (click)="showChildModal()">New Task</a>
            </li>
            <li class="sidebar-brand">
                <a (click)="showChat = !showChat">Project messages</a>
            </li>
            <li class="sidebar-brand">
                <a (click)="addUser = !addUser">Add user to project</a>
            </li>
            <div *ngIf="project.tasks.length === 0">
                <li>
                    <span>No tasks yet</span>
                </li>
            </div>
            <div *ngIf="project.tasks.length > 0">
                <li *ngFor="let task of project.tasks">
                    <a>{{task.title}}</a>
                </li>
            </div>
        </ul>
    </div>
    <!-- /#sidebar-wrapper -->

    <!-- Page Content -->
    <div id="page-content-wrapper">
        <div class="container-fluid">
            <div class="container">
                <div class="row">
                    <div class="col-xs-6">
                        <h4>Details for project: {{project.name}}</h4>
                        <ul>
                            <li>
                                <h5>Project tasks</h5>
                                <p>{{project | json}}</p>
                                <ul>
                                    <li *ngFor="let task of project.tasks">
                                        {{task.title}}
                                    </li>
                                </ul>
                            </li>
                        </ul>
                        <div [hidden]="!addUser">
                            <input auto-complete [source]="users" name="userToAdd" [(ngModel)]="userToAdd" type="text" />
                            <button (click)="addUserToProject(); !addUser">Add user to project</button>
                        </div>
                        <new-task (onSaveTask)="addToTasks($event)" [users]="project.projectMembers" [projectId]="projectId"></new-task>

                    </div>


                    <div id="main-chat" class="container col-xs-4" [hidden]="!showChat">
                        <div class="row">
                            <div class="panel panel-default">
                                <div class="panel-heading">{{project.name}}</div>
                                <div class="panel-body">
                                    <div id="message-container" #chatContent class="container scrollable-chat-menu">
                                        <div class="row message-bubble" *ngFor="let message of messages">
                                            <p class="text-muted">
                                                <img style="width: 30px; height: 25px;" src={{message.picture}}/> {{message.from}}
                                            </p>
                                            <p>{{message.message}}</p>
                                            <div>sent {{message.created | date}}</div>
                                        </div>
                                    </div>
                                    <div class="chat-message-botom">
                                        <div class="input-group">
                                            <input id="m" type="text" class="form-control" (keyup.enter)="messageBoardUpdate()" [(ngModel)]="message" />
                                            <span class="input-group-btn">
                            <button id="sendMsg" type="submit" class="btn btn-success" (click)="messageBoardUpdate()">Send</button>
                        </span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>